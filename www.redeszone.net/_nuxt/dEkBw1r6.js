const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./B9hnlOcM.js","./Bs9Xc8Tp.js","./oPhCY1eG.js","./entry.DFwSGy_I.css","./ArticleCard.G9z7vEHb.css","./Results.BGxlHvAY.css","./bfctFUim.js","./FullScreenOverlay.D6jHTKu3.css"])))=>i.map(i=>d[i]);
import{d as D,u as $,c as R,R as U,G,m as M,y as c,A as j,J as F,i as k,o as y,q as I,p as r,h as d,n as A,k as s,B as J,g as K,j as L,V as H,U as Q,am as W,S as X,T as Y,f as E,_ as w}from"./oPhCY1eG.js";import{_ as Z}from"./DkAksV3r.js";const ee=()=>D().$algolia;function ae(a){const n=ee();return n==null?void 0:n.initIndex(a)}function te(a){const n=$(),i=a||n.public.algolia.globalIndex;if(!i)throw new Error("`[@nuxtjs/algolia]` Cannot search in Algolia without `globalIndex` or `indexName` passed as a parameter");const h=ae(i),m=R(`${i}-search-result`,()=>null),e=async({query:u,requestOptions:_})=>{const o=await h.search(u,_);return m.value=o,o};return U(()=>{m.value=null}),{result:G(()=>m.value),search:e}}const se=E(()=>w(()=>import("./B9hnlOcM.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url).then(a=>a.default||a)),ne=E(()=>w(()=>import("./bfctFUim.js"),__vite__mapDeps([6,2,3,7]),import.meta.url).then(a=>a.default||a)),oe={class:"inner"},le={class:"main-search__form"},re={class:"main-search__input-wrapper"},ce={__name:"Search",props:["visible"],emits:["onCloseSearch"],setup(a,{emit:n}){const i=n,h=R("gazConfigData"),m=a,e=c(""),u=c(!1),_=c([]),o=c(!1),v=c(0),p=c(!1),S=c(null),{result:C,search:z}=te(h.value.searchIndex);j(()=>{document.removeEventListener("click",f)}),F(()=>m.visible,t=>{o.value=t,document.documentElement.style.overflow=t?"hidden":"hidden auto",t?document.addEventListener("click",f):document.removeEventListener("click",f)});const P=t=>{t.stopPropagation(),e.value="",u.value=!1},f=t=>{!S.value.contains(t.target)&&!t.target.closest(".search-btn")&&b()},g=async t=>{p.value||e.value.length===0||(p.value=!0,v.value=t,await z({query:e.value,requestOptions:{hitsPerPage:20,page:v.value}}),_.value=t===0?C.value.hits:[..._.value,...C.value.hits],u.value=!0,p.value=!1)},T=()=>{g(v.value+1)},b=()=>{u.value=!1,e.value="",_.value=[],o.value=!1,i("onCloseSearch")};return(t,l)=>{const B=W,N=X,O=se,V=ne,q=Z;return y(),k(q,null,{default:I(()=>[r("div",{ref_key:"mainSearch",ref:S,class:A(["main-search",{visible:s(o)}])},[r("div",oe,[r("div",le,[r("div",re,[J(r("input",{id:"mainSearchInput","onUpdate:modelValue":l[0]||(l[0]=x=>H(e)?e.value=x:null),class:"main-search__input",type:"text",placeholder:"Introduce tu búsqueda",onKeyup:l[1]||(l[1]=x=>g(0))},null,544),[[Q,s(e)]]),s(e).length>0?(y(),K("button",{key:0,class:"main-search__clear-form-btn",onClick:P},"borrar")):L("",!0)]),r("button",{class:A(`main-search__submit-btn  ${s(e).length===0?"main-search__submit-btn--disabled":""}`),type:"button",onClick:l[2]||(l[2]=x=>g(0)),"aria-label":"Buscar",role:"button"},[d(B,{class:"main-search__icon"})],2)]),r("button",{class:"main-search__close-btn",onClick:b,"aria-label":"Cerrar búsqueda"},[d(N,{class:"search-btn__icon"})])]),l[3]||(l[3]=r("div",{class:"main-search__separator"},null,-1)),d(Y,null,{default:I(()=>[s(o)&&s(u)&&s(e).length>0?(y(),k(O,{key:0,searchTerm:s(e),results:s(_),onLoadMore:T,onCloseSearch:b},null,8,["searchTerm","results"])):L("",!0)]),_:1})],2),d(V,{visible:s(o),class:"main-search__overlay"},null,8,["visible"])]),_:1})}}},_e=M(ce,[["__scopeId","data-v-0ad9f7f9"]]);export{_e as default};
